{# Header and footer can only be used once #}
{% macro header(title, title_url, nav_items) %}
    <div class="header-container container">
        <h1 id="blog-title" class="title"><a href={{ title_url }}>{{ title }}</a></h1>
        <nav id="global-nav">
            {%- for nav_item in nav_items -%}
                <a class="global-nav-item" href={% if nav_item.path %}{{ get_url(path=nav_item.path) }}{% else %}{{ nav_item.link }}{% endif %}>
                    {{ nav_item.name }}
                </a>
            {%- endfor -%}
        </nav>
    </div>
{% endmacro header %}

{% macro footer(copyright, powered_by) %}
    <div class="footer-container container">
        <div id="copyright-container">
            <small id="copyright">{{ copyright }}</small>
        </div>
        
        {% if powered_by %}
            <div id="powered-by-container">
                <small id="powered-by">{{ powered_by | markdown(inline=true) }}</small>
            </div>
        {% endif %}
    </div>
{% endmacro footer %}

{% macro pages_list(pages, title, title_url, have_title=true, config) %}
    <div class="pages-list-container container">
        {% if have_title == true %}
            <h1 class="title list-title pages-list-title"><a href={{ title_url }}>{{ title }}</a></h1>
        {% endif %}
        <ul class="pages-list">
            {% for page in pages %}
                <li class="pages-list-item">
                    {{ self::article_summary(page=page, config=config) }}
                </li>
            {% endfor %}
        </ul>
    </div>
{% endmacro pages_list %}

{% macro taxonomy_list(terms, title, title_url, have_title=true) %}
    <div class="taxonomy-list-container container">
        {% if have_title == true %}
            <h1 class="title list-title taxonomy-list-title"><a href={{ title_url }}>{{ title }}</a></h1>
        {% endif %}
        <ul class="taxonomy-list">
            {% for term in terms %}
                <li class="taxonomy-list-item">
                    <a class="taxonomy-list-item-link" href="{{ term.permalink }}">{{ term.name }}</a>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endmacro pages_list %}

{% macro toc_inner(toc) %}
    {% if toc | length != 0 %}
        <ul class="toc-parent">
                {% for entry in toc %}
                <li class="toc-entry">
                    <a href={{ entry.permalink }}>{{ entry.title }}</a>
                    {{ self::toc_inner(toc=entry.children) }}
                </li>
                {% endfor %}
        </ul>
    {% endif %}
{% endmacro %}

{% macro toc(toc, title) %}
    <div class="toc-container container">
        <h1 class="title toc-title">{{ title }}</h1>
        {{ self::toc_inner(toc=toc) }}
    </div>
{% endmacro %}

{% macro article_title_text(page, config) %}
    {% if page.draft == true %}
        {{ "[" ~ config.extra.text_draft ~ "]" }}
    {% endif %}
    {{ page.title }}
{% endmacro %}

{% macro article_title(page, config) %}
    <h1 class="title article-title">
        <a class="article-title-link" href="{{ page.permalink }}">
            {{ self::article_title_text(page=page, config=config) }}
        </a>
    </h1>
{% endmacro %}

{% macro article_datetime(page, config) %}
    <time datetime={{ page.date}}>{{ page.date | date(format=config.extra.date_format) }}</time>
{% endmacro %}

{% macro article_summary(page, config) %}
    <article class="article-summary-container container">
        {{ self::article_title(page=page, config=config) }}
        {{ self::article_datetime(page=page, config=config) }}
        <p class="article-summary">
            {{ page.summary | safe | striptags }}
            <a class="continue-reading-link" href="{{ page.permalink }}#continue-reading">
                {{ config.extra.text_continue_reading }}
            </a>
        </p>
    </article>
{% endmacro %}

{% macro article(page, config) %}
    <article class="article-container container">
        {{ self::article_title(page=page, config=config) }}
        {{ self::article_datetime(page=page, config=config) }}
        <section class="article-content">{{ page.content | safe }}</section>
    </article>
{% endmacro %}